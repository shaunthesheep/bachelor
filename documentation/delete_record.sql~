 CREATE TRIGGER return_item_trigger
 INSTEAD OF DELETE ON records_record
 FOR EACH STATEMENT
DECLARE 
	idx int;
	found boolean,
 --WHEN (NewPrice.price > (SELECT MIN(OldPrice.price) FROM OdlPrice WHERE NewPrice.speed = OldPrice.speed))
 BEGIN
	idx = array_length(tt,1);
	found = false;
	IF tt[1] = to_date('0001-01-01', 'YYYY-MM-DD') THEN
		idx = 1;
		found = true;
	ELSE
		WHILE idx > 0 AND found = False LOOP
    			IF tt[idx] <> to_date('0001-01-01', 'YYYY-MM-DD')
				found = true;
			ELSE
				idx = idx - 1;
			END IF;
		END LOOP;
	END IF;
	WHILE idx < array_length(tt,1);
		idx = idx + 1;
		UPDATE records_record SET tt[idx] = CURRENT_DATE;
	END LOOP;	
 END;
